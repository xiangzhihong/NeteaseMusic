import{_ as A,b as Fe,d as ee,o as Se,E as fe,u as le,a as Re,w as Oe,t as ve}from"./base-BQVd69ut.js";import{E as Ne,a as Pe}from"./el-tab-pane-B-wb68BK.js";import{d as R,r as O,k as f,q as N,l as q,u as T,p as Le,J as G,c as S,ah as j,ai as Me,A as De,F as Ae,a4 as F,x as K,o as b,w as h,b as m,aj as Be,ak as Ke,a as k,s as z,I as ze,H as J,g as W,C as _e,f as E,y as Ge,K as ne,U,n as Ue,t as B,h as Q,V as te,al as Ve,$ as He,am as je,an as Ye,ao as Je,W as We}from"./index-b8DxEvin.js";import{E as se}from"./el-button-BFfMptIm.js";import{O as qe,a as Qe,b as Xe}from"./el-popper-CZ_bCuQ8.js";import{c as ge,E as Ze}from"./el-avatar-wayOfPXH.js";import{_ as oe}from"./IconPark.vue_vue_type_script_setup_true_lang-qUxdgk-o.js";import{g as X,d as P,a as xe,E as Y,w as ue}from"./event-3DiSBjGl.js";import{d as eo,a as be,b as oo}from"./dropdown-C6MBTBgP.js";import{u as no}from"./objects-JOKj_S0Y.js";import{u as we}from"./constants-zWIDR2xC.js";import{c as to}from"./index-BvHh02iH.js";import{c as lo,E as so}from"./el-select-DTb24hVD.js";import{M as ro,S as ao}from"./SongListItem-BO7piTzp.js";import{P as io}from"./PlayOne-DeVsIhjT.js";import{L as uo}from"./PlayTwo-pGKnjhhV.js";import{_ as co}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./el-input-CYgHh7X5.js";import{_ as ce}from"./CommentList.vue_vue_type_script_setup_true_lang-yVJd0yvV.js";import"./strings-DYj8DN6N.js";import"./error-Cpq0EWYd.js";import"./clamp-iJz4MCu1.js";import"./event-BB_Ol6Sd.js";import"./vnode-Bh7OSXng.js";import"./use-global-config-BcuVRQnT.js";import"./index-vyc-TgTO.js";import"./scroll-BvtJi3kH.js";import"./user-KKBVMGEq.js";const po=R({inheritAttrs:!1});function mo(e,n,l,o,a,r){return O(e.$slots,"default")}var fo=A(po,[["render",mo],["__file","collection.vue"]]);const vo=R({name:"ElCollectionItem",inheritAttrs:!1});function _o(e,n,l,o,a,r){return O(e.$slots,"default")}var go=A(vo,[["render",_o],["__file","collection-item.vue"]]);const he="data-el-collection-item",bo=e=>{const n=`El${e}Collection`,l=`${n}Item`,o=Symbol(n),a=Symbol(l),r={...fo,name:n,setup(){const i=f(),c=new Map;G(o,{itemMap:c,getItems:()=>{const p=T(i);if(!p)return[];const t=Array.from(p.querySelectorAll(`[${he}]`));return[...c.values()].sort((_,g)=>t.indexOf(_.ref)-t.indexOf(g.ref))},collectionRef:i})}},s={...go,name:l,setup(i,{attrs:c}){const v=f(),p=N(o,void 0);G(a,{collectionItemRef:v}),q(()=>{const t=T(v);t&&p.itemMap.set(t,{ref:t,...c})}),Le(()=>{const t=T(v);p.itemMap.delete(t)})}};return{COLLECTION_INJECTION_KEY:o,COLLECTION_ITEM_INJECTION_KEY:a,ElCollection:r,ElCollectionItem:s}},wo=Fe({style:{type:ee([String,Array,Object])},currentTabId:{type:ee(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:ee(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:ho,ElCollectionItem:yo,COLLECTION_INJECTION_KEY:ye,COLLECTION_ITEM_INJECTION_KEY:Io}=bo("RovingFocusGroup"),re=Symbol("elRovingFocusGroup"),Ie=Symbol("elRovingFocusGroupItem"),Co={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Eo=(e,n)=>e,$o=(e,n,l)=>{const o=X(e),a=Eo(o);return Co[a]},ko=(e,n)=>e.map((l,o)=>e[(o+n)%e.length]),de=e=>{const{activeElement:n}=document;for(const l of e)if(l===n||(l.focus(),n!==document.activeElement))return},pe="currentTabIdChange",me="rovingFocusGroup.entryFocus",To={bubbles:!1,cancelable:!0},Fo=R({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:wo,emits:[pe,"entryFocus"],setup(e,{emit:n}){var l;const o=f((l=e.currentTabId||e.defaultCurrentTabId)!=null?l:null),a=f(!1),r=f(!1),s=f(),{getItems:i}=N(ye,void 0),c=S(()=>[{outline:"none"},e.style]),v=d=>{n(pe,d)},p=()=>{a.value=!0},t=P(d=>{var w;(w=e.onMousedown)==null||w.call(e,d)},()=>{r.value=!0}),u=P(d=>{var w;(w=e.onFocus)==null||w.call(e,d)},d=>{const w=!T(r),{target:M,currentTarget:I}=d;if(M===I&&w&&!T(a)){const C=new Event(me,To);if(I?.dispatchEvent(C),!C.defaultPrevented){const L=i().filter(D=>D.focusable),V=L.find(D=>D.active),H=L.find(D=>D.id===T(o)),x=[V,H,...L].filter(Boolean).map(D=>D.ref);de(x)}}r.value=!1}),_=P(d=>{var w;(w=e.onBlur)==null||w.call(e,d)},()=>{a.value=!1}),g=(...d)=>{n("entryFocus",...d)},y=d=>{const w=$o(d);if(w){d.preventDefault();let I=i().filter(C=>C.focusable).map(C=>C.ref);switch(w){case"last":{I.reverse();break}case"prev":case"next":{w==="prev"&&I.reverse();const C=I.indexOf(d.currentTarget);I=e.loop?ko(I,C+1):I.slice(C+1);break}}Ae(()=>{de(I)})}};G(re,{currentTabbedId:Me(o),loop:j(e,"loop"),tabIndex:S(()=>T(a)?-1:0),rovingFocusGroupRef:s,rovingFocusGroupRootStyle:c,orientation:j(e,"orientation"),dir:j(e,"dir"),onItemFocus:v,onItemShiftTab:p,onBlur:_,onFocus:u,onMousedown:t,onKeydown:y}),De(()=>e.currentTabId,d=>{o.value=d??null}),xe(s,me,g)}});function So(e,n,l,o,a,r){return O(e.$slots,"default")}var Ro=A(Fo,[["render",So],["__file","roving-focus-group-impl.vue"]]);const Oo=R({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:ho,ElRovingFocusGroupImpl:Ro}});function No(e,n,l,o,a,r){const s=F("el-roving-focus-group-impl"),i=F("el-focus-group-collection");return b(),K(i,null,{default:h(()=>[m(s,Be(Ke(e.$attrs)),{default:h(()=>[O(e.$slots,"default")]),_:3},16)]),_:3})}var Po=A(Oo,[["render",No],["__file","roving-focus-group.vue"]]);const Z=Symbol("elDropdown"),Ce="elDropdown",{ButtonGroup:Lo}=se,Mo=R({name:"ElDropdown",components:{ElButton:se,ElButtonGroup:Lo,ElScrollbar:Xe,ElTooltip:Qe,ElRovingFocusGroup:Po,ElOnlyChild:qe,ElIcon:fe,ArrowDown:Se},props:eo,emits:["visible-change","click","command"],setup(e,{emit:n}){const l=_e(),o=le("dropdown"),{t:a}=no(),r=f(),s=f(),i=f(),c=f(),v=f(null),p=f(null),t=f(!1),u=S(()=>({maxHeight:Re(e.maxHeight)})),_=S(()=>[o.m(C.value)]),g=S(()=>lo(e.trigger)),y=we().value,d=S(()=>e.id||y);function w(){var $;($=i.value)==null||$.onClose(void 0,0)}function M(){var $;($=i.value)==null||$.onClose()}function I(){var $;($=i.value)==null||$.onOpen()}const C=to();function L(...$){n("command",...$)}function V(){}function H(){const $=T(c);g.value.includes("hover")&&$?.focus({preventScroll:!0}),p.value=null}function ae($){p.value=$}function x(){n("visible-change",!0)}function D($){var ie;t.value=$?.type==="keydown",(ie=c.value)==null||ie.focus()}function Te(){n("visible-change",!1)}return G(Z,{contentRef:c,role:S(()=>e.role),triggerId:d,isUsingKeyboard:t,onItemEnter:V,onItemLeave:H,handleClose:M}),G(Ce,{instance:l,dropdownSize:C,handleClick:w,commandHandler:L,trigger:j(e,"trigger"),hideOnClick:j(e,"hideOnClick")}),{t:a,ns:o,scrollbar:v,wrapStyle:u,dropdownTriggerKls:_,dropdownSize:C,triggerId:d,currentTabId:p,handleCurrentTabIdChange:ae,handlerMainButtonClick:$=>{n("click",$)},handleClose:M,handleOpen:I,handleBeforeShowTooltip:x,handleShowTooltip:D,handleBeforeHideTooltip:Te,popperRef:i,contentRef:c,triggeringElementRef:r,referenceElementRef:s}}});function Do(e,n,l,o,a,r){var s;const i=F("el-roving-focus-group"),c=F("el-scrollbar"),v=F("el-only-child"),p=F("el-tooltip"),t=F("el-button"),u=F("arrow-down"),_=F("el-icon"),g=F("el-button-group");return b(),k("div",{class:W([e.ns.b(),e.ns.is("disabled",e.disabled)])},[m(p,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"popper-style":e.popperStyle,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-arrow":e.showArrow,"show-after":e.trigger==="hover"?e.showTimeout:0,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"virtual-ref":(s=e.virtualRef)!=null?s:e.triggeringElementRef,"virtual-triggering":e.virtualTriggering||e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"","focus-on-target":"",persistent:e.persistent,onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},ze({content:h(()=>[m(c,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:h(()=>[m(i,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange},{default:h(()=>[O(e.$slots,"dropdown")]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:h(()=>[m(v,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:h(()=>[O(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","placement","popper-class","popper-style","trigger","trigger-keys","trigger-target-el","show-arrow","show-after","hide-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(b(),K(g,{key:0},{default:h(()=>[m(t,J({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:h(()=>[O(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),m(t,J({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:h(()=>[m(_,{class:W(e.ns.e("icon"))},{default:h(()=>[m(u)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):z("v-if",!0)],2)}var Ao=A(Mo,[["render",Do],["__file","dropdown.vue"]]);const Bo=R({components:{ElRovingFocusCollectionItem:yo},props:{focusable:{type:Boolean,default:!0},active:Boolean},emits:["mousedown","focus","keydown"],setup(e,{emit:n}){const{currentTabbedId:l,onItemFocus:o,onItemShiftTab:a,onKeydown:r}=N(re,void 0),s=we(),i=f(),c=P(u=>{n("mousedown",u)},u=>{e.focusable?o(T(s)):u.preventDefault()}),v=P(u=>{n("focus",u)},()=>{o(T(s))}),p=P(u=>{n("keydown",u)},u=>{const{shiftKey:_,target:g,currentTarget:y}=u;if(X(u)===Y.tab&&_){a();return}g===y&&r(u)}),t=S(()=>l.value===T(s));return G(Ie,{rovingFocusGroupItemRef:i,tabIndex:S(()=>T(t)?0:-1),handleMousedown:c,handleFocus:v,handleKeydown:p}),{id:s,handleKeydown:p,handleFocus:v,handleMousedown:c}}});function Ko(e,n,l,o,a,r){const s=F("el-roving-focus-collection-item");return b(),K(s,{id:e.id,focusable:e.focusable,active:e.active},{default:h(()=>[O(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var zo=A(Bo,[["render",Ko],["__file","roving-focus-item.vue"]]);const Go=R({name:"DropdownItemImpl",components:{ElIcon:fe},props:be,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:n}){const l=le("dropdown"),{role:o}=N(Z,void 0),{collectionItemRef:a}=N(Io,void 0),{rovingFocusGroupItemRef:r,tabIndex:s,handleFocus:i,handleKeydown:c,handleMousedown:v}=N(Ie,void 0),p=ge(a,r),t=S(()=>o.value==="menu"?"menuitem":o.value==="navigation"?"link":"button"),u=P(_=>{const g=X(_);if([Y.enter,Y.numpadEnter,Y.space].includes(g))return _.preventDefault(),_.stopImmediatePropagation(),n("clickimpl",_),!0},c);return{ns:l,itemRef:p,dataset:{[he]:""},role:t,tabIndex:s,handleFocus:i,handleKeydown:u,handleMousedown:v}}});function Uo(e,n,l,o,a,r){const s=F("el-icon");return b(),k(U,null,[e.divided?(b(),k("li",{key:0,role:"separator",class:W(e.ns.bem("menu","item","divided"))},null,2)):z("v-if",!0),E("li",J({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:i=>e.$emit("clickimpl",i),onFocus:e.handleFocus,onKeydown:ne(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:i=>e.$emit("pointermove",i),onPointerleave:i=>e.$emit("pointerleave",i)}),[e.icon?(b(),K(s,{key:0},{default:h(()=>[(b(),K(Ge(e.icon)))]),_:1})):z("v-if",!0),O(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var Vo=A(Go,[["render",Uo],["__file","dropdown-item-impl.vue"]]);const Ee=()=>{const e=N(Ce,{}),n=S(()=>e?.dropdownSize);return{elDropdown:e,_elDropdownSize:n}},Ho=R({name:"ElDropdownItem",components:{ElRovingFocusItem:zo,ElDropdownItemImpl:Vo},inheritAttrs:!1,props:be,emits:["pointermove","pointerleave","click"],setup(e,{emit:n,attrs:l}){const{elDropdown:o}=Ee(),a=_e(),{onItemEnter:r,onItemLeave:s}=N(Z,void 0),i=P(t=>(n("pointermove",t),t.defaultPrevented),ue(t=>{if(e.disabled){s(t);return}const u=t.currentTarget;u===document.activeElement||u.contains(document.activeElement)||(r(t),t.defaultPrevented||u?.focus({preventScroll:!0}))})),c=P(t=>(n("pointerleave",t),t.defaultPrevented),ue(s)),v=P(t=>{if(!e.disabled)return n("click",t),t.type!=="keydown"&&t.defaultPrevented},t=>{var u,_,g;if(e.disabled){t.stopImmediatePropagation();return}(u=o?.hideOnClick)!=null&&u.value&&((_=o.handleClick)==null||_.call(o)),(g=o.commandHandler)==null||g.call(o,e.command,a,t)}),p=S(()=>({...e,...l}));return{handleClick:v,handlePointerMove:i,handlePointerLeave:c,propsAndAttrs:p}}});function jo(e,n,l,o,a,r){const s=F("el-dropdown-item-impl"),i=F("el-roving-focus-item");return b(),K(i,{focusable:!e.disabled},{default:h(()=>[m(s,J(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:h(()=>[O(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])}var $e=A(Ho,[["render",jo],["__file","dropdown-item.vue"]]);const Yo=R({name:"ElDropdownMenu",props:oo,setup(e){const n=le("dropdown"),{_elDropdownSize:l}=Ee(),o=l.value,{contentRef:a,role:r,triggerId:s,isUsingKeyboard:i,handleClose:c}=N(Z,void 0),{rovingFocusGroupRef:v,rovingFocusGroupRootStyle:p,onBlur:t,onFocus:u,onKeydown:_,onMousedown:g}=N(re,void 0),{collectionRef:y}=N(ye,void 0),d=S(()=>[n.b("menu"),n.bm("menu",o?.value)]),w=ge(a,v,y),M=P(C=>{var L;(L=e.onKeydown)==null||L.call(e,C)},C=>{const{currentTarget:L,target:V}=C,H=X(C);if(L.contains(V),Y.tab===H)return c();_(C)});function I(C){i.value&&u(C)}return{size:o,rovingFocusGroupRootStyle:p,dropdownKls:d,role:r,triggerId:s,dropdownListWrapperRef:w,handleKeydown:M,onBlur:t,handleFocus:I,onMousedown:g}}});function Jo(e,n,l,o,a,r){return b(),k("ul",{ref:e.dropdownListWrapperRef,class:W(e.dropdownKls),style:Ue(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onFocusin:e.handleFocus,onFocusout:e.onBlur,onKeydown:ne(e.handleKeydown,["self"]),onMousedown:ne(e.onMousedown,["self"])},[O(e.$slots,"default")],46,["role","aria-labelledby","onFocusin","onFocusout","onKeydown","onMousedown"])}var ke=A(Yo,[["render",Jo],["__file","dropdown-menu.vue"]]);const Wo=Oe(Ao,{DropdownItem:$e,DropdownMenu:ke}),qo=ve($e),Qo=ve(ke),Xo={class:"leading-5"},Zo={key:0},xo={key:1},en=R({__name:"MoreText",props:{text:{},end:{}},setup(e){const n=e,l=f(!1),o=f(!1);return n.text&&n.text.length>n.end&&(l.value=!0),(a,r)=>(b(),k("div",Xo,[l.value?(b(),k(U,{key:0},[o.value?(b(),k("span",xo,B(e.text)+"...",1)):(b(),k("span",Zo,B(e.text.substring(0,e.end))+"...",1)),E("span",{class:"ml-5 text-gray-700 hover-text",onClick:r[0]||(r[0]=s=>o.value=!o.value)},"["+B(o.value?"收起":"详情")+"]",1)],64)):(b(),k(U,{key:1},[Q(B(e.text),1)],64))]))}}),on={key:0,class:"flex items-stretch"},nn=["src"],tn={class:"pl-5 flex flex-col justify-between py-1 flex-1"},ln={class:"text-2xl font-bold"},sn={class:"flex items-center text-xs text-dc pb-2 pt-3"},rn={class:"ml-2"},an={class:"ml-5 flex text-dc"},un={class:"text-sm text-gray-500 leading-normal"},cn={class:"justify-self-stretch mt-5 gap-x-2 flex items-center"},dn={class:"w-32 button-outline"},pn={class:"el-dropdown-btn"},mn={class:"button-outline w-8"},fn=R({__name:"Info",props:{id:{},playAll:{type:Function}},setup(e){const n=e,l=f(),o=[{value:"0",title:"添加到"},{value:"1",title:"分享"},{value:"2",title:"下载"},{value:"3",title:"举报"}],a=()=>{Ve(n.id).then(r=>{l.value=r})};return q(()=>{a()}),(r,s)=>{const i=Ze,c=qo,v=Qo,p=Wo;return l.value?(b(),k("div",on,[E("img",{src:l.value.coverImgUrl,alt:"",class:"w-44 h-44 object-cover rounded-xl flex-shrink-0"},null,8,nn),E("div",tn,[E("div",null,[E("div",ln,B(l.value.name),1),E("div",sn,[m(i,{src:l.value.creator.avatarUrl,size:"small",round:""},null,8,["src"]),E("span",rn,B(l.value.creator.nickname),1),E("div",an,[(b(!0),k(U,null,te(l.value.tags,t=>(b(),k("div",{class:"ml-2 hover-text",key:t},"#"+B(t),1))),128))])]),E("div",un,[m(en,{text:l.value.description,end:90},null,8,["text"])])]),E("div",cn,[E("button",{class:"w-32 button",onClick:s[0]||(s[0]=(...t)=>e.playAll&&e.playAll(...t))},[m(oe,{icon:T(io),size:"22",class:"mr-1"},null,8,["icon"]),s[1]||(s[1]=E("span",null,"播放全部",-1))]),E("button",dn,[m(oe,{icon:T(uo),size:"18",class:"mr-1"},null,8,["icon"]),s[2]||(s[2]=E("span",null,"收藏",-1))]),m(p,{placement:"bottom"},{dropdown:h(()=>[m(v,null,{default:h(()=>[(b(),k(U,null,te(o,(t,u)=>m(c,{key:u},{default:h(()=>[Q(B(t.title),1)]),_:2},1024)),64))]),_:1})]),default:h(()=>[E("button",pn,[E("div",mn,[m(oe,{icon:T(ro)},null,8,["icon"])])])]),_:1})])])])):z("",!0)}}}),vn=co(fn,[["__scopeId","data-v-382fe51a"]]),_n={class:"mt-2"},gn={class:"text-sm"},bn={key:0,class:"flex justify-center py-5"},wn=R({__name:"SongList",props:{id:{}},setup(e,{expose:n}){const l=e,o=f([]),a=f(10),r=f(1),{pushPlayList:s,play:i}=He(),c=()=>{s(!0,...o.value),i(o.value.first().id)},v=S(()=>r.value-o.value.length/a.value>=0),p=()=>{r.value=r.value+1},t=()=>{Ye(l.id).then(u=>{o.value=u})};return q(()=>{t()}),n({playAll:c}),(u,_)=>{const g=se;return b(),k("div",_n,[_[1]||(_[1]=je('<div class="flex text-xs text-gray-400 py-2"><div class="flex-auto">歌曲</div><div class="w-1/4">歌手</div><div class="w-1/4">专辑</div><div class="w-20">时长</div></div>',1)),E("div",gn,[(b(!0),k(U,null,te(o.value.slice(0,a.value*r.value),y=>(b(),K(ao,{key:y.id,song:y,"show-ar-name":"","show-al-name":""},null,8,["song"]))),128))]),o.value.length>a.value&&!v.value?(b(),k("div",bn,[m(g,{type:"text",class:"text-center w-full",onClick:p},{default:h(()=>[..._[0]||(_[0]=[Q("加载更多",-1)])]),_:1})])):z("",!0)])}}}),hn={class:"flex justify-end mt-5"},yn={key:0,class:"text-center opacity-50"},In={key:1,class:"flex justify-end mt-6"},Cn=R({__name:"CommentList",props:{id:{}},setup(e){const n=e,l=f(n.id),o=f({}),a=f(!1),r=f(""),s=f(0),i=f(20),c=f(1),v=g=>{o.value.total+=1,o.value.comments.unshift(g)},p=(g,y)=>{let{index:d,liked:w}=g;y?(o.value.hotComments[d].liked=w,w?o.value.hotComments[d].likedCount+=1:o.value.hotComments[d].likedCount-=1):(o.value.comments[d].liked=w,w?o.value.comments[d].likedCount+=1:o.value.comments[d].likedCount-=1)},t=g=>{c.value=g,_()},u=()=>{if(r.value)window.$message.success("评论成功");else return window.$message.error("评论不能为空!")};async function _(){Je(n.id,c.value).then(g=>{o.value=g,s.value=o.value.total})}return q(()=>{_()}),(g,y)=>{const d=F("n-input"),w=F("n-button"),M=so;return b(),k("div",null,[m(d,{value:r.value,"onUpdate:value":y[0]||(y[0]=I=>r.value=I),type:"textarea",maxlength:140,"show-count":!0},null,8,["value"]),E("div",hn,[m(w,{round:"",loading:a.value,onClick:u},{default:h(()=>[...y[3]||(y[3]=[Q(" 评论 ",-1)])]),_:1},8,["loading"])]),E("div",null,[m(ce,{type:2,"resource-id":+l.value,title:"精彩评论",list:o.value.hotComments||[],onUpdateCommentList:v,onUpdateCommentLiked:y[1]||(y[1]=I=>p(I,!0))},null,8,["resource-id","list"]),m(ce,{"resource-id":+l.value,type:2,"comment-total-num":o.value.total,title:"最新评论",list:o.value.comments||[],onUpdateCommentList:v,onUpdateCommentLiked:y[2]||(y[2]=I=>p(I,!1))},null,8,["resource-id","comment-total-num","list"])]),o.value.comments?.length?z("",!0):(b(),k("p",yn," 还没有评论, 快来抢沙发~ ")),s.value>1?(b(),k("div",In,[m(M,{background:"",layout:"prev, pager, next","current-page":c.value,"page-size":i.value,total:s.value,onCurrentChange:t},null,8,["current-page","page-size","total"])])):z("",!0)])}}}),En={class:"playlist"},$n={class:"p-5"},ot=R({__name:"PlayList",setup(e){const n=f(),l=We(),o=Number(l.query.id),a=f("tracks"),r=()=>{n.value.playAll()};return(s,i)=>{const c=Pe,v=Ne;return b(),k("div",En,[E("div",$n,[m(vn,{id:T(o),"play-all":()=>r()},null,8,["id","play-all"]),m(v,{class:"mt-3",modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=p=>a.value=p)},{default:h(()=>[m(c,{lazy:"",label:"歌曲",name:"tracks"},{default:h(()=>[m(wn,{id:T(o),ref_key:"songlistRef",ref:n},null,8,["id"])]),_:1}),m(c,{lazy:"",label:"评论",name:"comments"},{default:h(()=>[m(Cn,{id:T(o)},null,8,["id"])]),_:1})]),_:1},8,["modelValue"])])])}}});export{ot as default};
