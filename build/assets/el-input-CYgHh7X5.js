import{P as ae,C as Je,S as X,k as K,A as q,i as Ce,u as t,F,d as Ve,bl as Xe,G as qe,c as b,l as Qe,ah as Ze,a as I,o as h,s as y,U as ne,f as O,g as x,r as G,x as E,w as $,y as A,H as Se,K as _e,N as et,t as J,n as Ie,D as Ee}from"./index-b8DxEvin.js";import{i as tt,m as ot,a as se,e as at}from"./event-3DiSBjGl.js";import{i as Ne,b as nt,d as B,F as st,_ as it,u as ze,J as lt,K as rt,E as D,e as ut,w as dt}from"./base-BQVd69ut.js";import{a as ct,c as pt,d as ft,b as mt,e as vt}from"./index-BvHh02iH.js";import{i as ie,V as ht}from"./constants-zWIDR2xC.js";import{u as yt}from"./el-popper-CZ_bCuQ8.js";import{U as Q,I as le,C as Pe}from"./event-BB_Ol6Sd.js";import{b as gt,u as bt,i as wt}from"./index-vyc-TgTO.js";import{d as ke}from"./error-Cpq0EWYd.js";let C;const xt={height:"0",visibility:"hidden",overflow:tt()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Ct=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],Fe=a=>{const s=Number.parseFloat(a);return Number.isNaN(s)?a:s};function St(a){const s=window.getComputedStyle(a),i=s.getPropertyValue("box-sizing"),o=Number.parseFloat(s.getPropertyValue("padding-bottom"))+Number.parseFloat(s.getPropertyValue("padding-top")),d=Number.parseFloat(s.getPropertyValue("border-bottom-width"))+Number.parseFloat(s.getPropertyValue("border-top-width"));return{contextStyle:Ct.map(p=>[p,s.getPropertyValue(p)]),paddingSize:o,borderSize:d,boxSizing:i}}function Te(a,s=1,i){var o,d;C||(C=document.createElement("textarea"),((o=a.parentNode)!=null?o:document.body).appendChild(C));const{paddingSize:c,borderSize:p,boxSizing:l,contextStyle:f}=St(a);f.forEach(([w,u])=>C?.style.setProperty(w,u)),Object.entries(xt).forEach(([w,u])=>C?.style.setProperty(w,u,"important")),C.value=a.value||a.placeholder||"";let m=C.scrollHeight;const v={};l==="border-box"?m=m+p:l==="content-box"&&(m=m-c),C.value="";const z=C.scrollHeight-c;if(Ne(s)){let w=z*s;l==="border-box"&&(w=w+c+p),m=Math.max(w,m),v.minHeight=`${w}px`}if(Ne(i)){let w=z*i;l==="border-box"&&(w=w+c+p),m=Math.min(w,m)}return v.height=`${m}px`,(d=C.parentNode)==null||d.removeChild(C),C=void 0,v}const It=nt({id:{type:String,default:void 0},size:ct,disabled:Boolean,modelValue:{type:B([String,Number,Object]),default:""},modelModifiers:{type:B(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:B([Boolean,Object]),default:!1},autocomplete:{type:B(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:ie,default:st},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:["inside","outside"],default:"inside"},suffixIcon:{type:ie},prefixIcon:{type:ie},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:B([Object,Array,String]),default:()=>ot({})},autofocus:Boolean,rows:{type:Number,default:2},...yt(["ariaLabel"]),inputmode:{type:B(String),default:void 0},name:String}),Et={[Q]:a=>ae(a),input:a=>ae(a),change:a=>ae(a),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent};function Nt(a,{disabled:s,beforeFocus:i,afterFocus:o,beforeBlur:d,afterBlur:c}={}){const p=Je(),{emit:l}=p,f=X(),m=K(!1),v=u=>{const n=Ce(i)?i(u):!1;t(s)||m.value||n||(m.value=!0,l("focus",u),o?.())},z=u=>{var n;const P=Ce(d)?d(u):!1;t(s)||u.relatedTarget&&((n=f.value)!=null&&n.contains(u.relatedTarget))||P||(m.value=!1,l("blur",u),c?.())},w=u=>{var n,P;t(s)||gt(u.target)||(n=f.value)!=null&&n.contains(document.activeElement)&&f.value!==document.activeElement||(P=a.value)==null||P.focus()};return q([f,()=>t(s)],([u,n])=>{u&&(n?u.removeAttribute("tabindex"):u.setAttribute("tabindex","-1"))}),se(f,"focus",v,!0),se(f,"blur",z,!0),se(f,"click",w,!0),{isFocused:m,wrapperRef:f,handleFocus:v,handleBlur:z}}const zt=a=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(a);function Pt({afterComposition:a,emit:s}){const i=K(!1),o=l=>{s?.("compositionstart",l),i.value=!0},d=l=>{var f;s?.("compositionupdate",l);const m=(f=l.target)==null?void 0:f.value,v=m[m.length-1]||"";i.value=!zt(v)},c=l=>{s?.("compositionend",l),i.value&&(i.value=!1,F(()=>a(l)))};return{isComposing:i,handleComposition:l=>{l.type==="compositionend"?c(l):d(l)},handleCompositionStart:o,handleCompositionUpdate:d,handleCompositionEnd:c}}function kt(a){let s;function i(){if(a.value==null)return;const{selectionStart:d,selectionEnd:c,value:p}=a.value;if(d==null||c==null)return;const l=p.slice(0,Math.max(0,d)),f=p.slice(Math.max(0,c));s={selectionStart:d,selectionEnd:c,value:p,beforeTxt:l,afterTxt:f}}function o(){if(a.value==null||s==null)return;const{value:d}=a.value,{beforeTxt:c,afterTxt:p,selectionStart:l}=s;if(c==null||p==null||l==null)return;let f=d.length;if(d.endsWith(p))f=d.length-p.length;else if(d.startsWith(c))f=c.length;else{const m=c[l-1],v=d.indexOf(m,l-1);v!==-1&&(f=v+1)}a.value.setSelectionRange(f,f)}return[i,o]}const Ft="ElInput",Tt=Ve({name:Ft,inheritAttrs:!1}),Vt=Ve({...Tt,props:It,emits:Et,setup(a,{expose:s,emit:i}){const o=a,d=Xe(),c=bt(),p=qe(),l=b(()=>[o.type==="textarea"?P.b():n.b(),n.m(w.value),n.is("disabled",u.value),n.is("exceed",He.value),{[n.b("group")]:p.prepend||p.append,[n.m("prefix")]:p.prefix||o.prefixIcon,[n.m("suffix")]:p.suffix||o.suffixIcon||o.clearable||o.showPassword,[n.bm("suffix","password-clear")]:Y.value&&ee.value,[n.b("hidden")]:o.type==="hidden"},d.class]),f=b(()=>[n.e("wrapper"),n.is("focus",_.value)]),{form:m,formItem:v}=mt(),{inputId:z}=vt(o,{formItemContext:v}),w=pt(),u=ft(),n=ze("input"),P=ze("textarea"),j=X(),N=X(),Z=K(!1),U=K(!1),re=K(),W=X(o.inputStyle),S=b(()=>j.value||N.value),{wrapperRef:Me,isFocused:_,handleFocus:Oe,handleBlur:Be}=Nt(S,{disabled:u,afterBlur(){var e;o.validateEvent&&((e=v?.validate)==null||e.call(v,"blur").catch(r=>ke()))}}),ue=b(()=>{var e;return(e=m?.statusIcon)!=null?e:!1}),L=b(()=>v?.validateState||""),de=b(()=>L.value&&ht[L.value]),Le=b(()=>U.value?lt:rt),Re=b(()=>[d.style]),ce=b(()=>[o.inputStyle,W.value,{resize:o.resize}]),k=b(()=>wt(o.modelValue)?"":String(o.modelValue)),Y=b(()=>o.clearable&&!u.value&&!o.readonly&&!!k.value&&(_.value||Z.value)),ee=b(()=>o.showPassword&&!u.value&&!!k.value),T=b(()=>o.showWordLimit&&!!o.maxlength&&(o.type==="text"||o.type==="textarea")&&!u.value&&!o.readonly&&!o.showPassword),te=b(()=>k.value.length),He=b(()=>!!T.value&&te.value>Number(o.maxlength)),$e=b(()=>!!p.suffix||!!o.suffixIcon||Y.value||o.showPassword||T.value||!!L.value&&ue.value),Ae=b(()=>!!Object.keys(o.modelModifiers).length),[pe,fe]=kt(j);at(N,e=>{if(De(),!T.value||o.resize!=="both")return;const r=e[0],{width:g}=r.contentRect;re.value={right:`calc(100% - ${g+15+6}px)`}});const R=()=>{const{type:e,autosize:r}=o;if(!(!ut||e!=="textarea"||!N.value))if(r){const g=Ee(r)?r.minRows:void 0,M=Ee(r)?r.maxRows:void 0,H=Te(N.value,g,M);W.value={overflowY:"hidden",...H},F(()=>{N.value.offsetHeight,W.value=H})}else W.value={minHeight:Te(N.value).minHeight}},De=(e=>{let r=!1;return()=>{var g;if(r||!o.autosize)return;((g=N.value)==null?void 0:g.offsetParent)===null||(setTimeout(e),r=!0)}})(R),V=()=>{const e=S.value,r=o.formatter?o.formatter(k.value):k.value;!e||e.value===r||(e.value=r)},me=e=>{const{trim:r,number:g}=o.modelModifiers;return r&&(e=e.trim()),g&&(e=`${Fe(e)}`),o.formatter&&o.parser&&(e=o.parser(e)),e},oe=async e=>{if(he.value)return;const{lazy:r}=o.modelModifiers;let{value:g}=e.target;if(r){i(le,g);return}if(g=me(g),String(g)===k.value){o.formatter&&V();return}pe(),i(Q,g),i(le,g),await F(),(o.formatter&&o.parser||!Ae.value)&&V(),fe()},ve=async e=>{let{value:r}=e.target;r=me(r),o.modelModifiers.lazy&&i(Q,r),i(Pe,r),await F(),V()},{isComposing:he,handleCompositionStart:ye,handleCompositionUpdate:ge,handleCompositionEnd:be}=Pt({emit:i,afterComposition:oe}),Ke=()=>{pe(),U.value=!U.value,setTimeout(fe)},je=()=>{var e;return(e=S.value)==null?void 0:e.focus()},Ue=()=>{var e;return(e=S.value)==null?void 0:e.blur()},We=e=>{Z.value=!1,i("mouseleave",e)},Ye=e=>{Z.value=!0,i("mouseenter",e)},we=e=>{i("keydown",e)},Ge=()=>{var e;(e=S.value)==null||e.select()},xe=()=>{i(Q,""),i(Pe,""),i("clear"),i(le,"")};return q(()=>o.modelValue,()=>{var e;F(()=>R()),o.validateEvent&&((e=v?.validate)==null||e.call(v,"change").catch(r=>ke()))}),q(k,e=>{if(!S.value)return;const{trim:r,number:g}=o.modelModifiers,M=S.value.value,H=(g||o.type==="number")&&!/^0\d/.test(M)?`${Fe(M)}`:M;H!==e&&(document.activeElement===S.value&&S.value.type!=="range"&&r&&H.trim()===e||V())}),q(()=>o.type,async()=>{await F(),V(),R()}),Qe(()=>{!o.formatter&&o.parser,V(),F(R)}),s({input:j,textarea:N,ref:S,textareaStyle:ce,autosize:Ze(o,"autosize"),isComposing:he,focus:je,blur:Ue,select:Ge,clear:xe,resizeTextarea:R}),(e,r)=>(h(),I("div",{class:x([t(l),{[t(n).bm("group","append")]:e.$slots.append,[t(n).bm("group","prepend")]:e.$slots.prepend}]),style:Ie(t(Re)),onMouseenter:Ye,onMouseleave:We},[y(" input "),e.type!=="textarea"?(h(),I(ne,{key:0},[y(" prepend slot "),e.$slots.prepend?(h(),I("div",{key:0,class:x(t(n).be("group","prepend"))},[G(e.$slots,"prepend")],2)):y("v-if",!0),O("div",{ref_key:"wrapperRef",ref:Me,class:x(t(f))},[y(" prefix slot "),e.$slots.prefix||e.prefixIcon?(h(),I("span",{key:0,class:x(t(n).e("prefix"))},[O("span",{class:x(t(n).e("prefix-inner"))},[G(e.$slots,"prefix"),e.prefixIcon?(h(),E(t(D),{key:0,class:x(t(n).e("icon"))},{default:$(()=>[(h(),E(A(e.prefixIcon)))]),_:1},8,["class"])):y("v-if",!0)],2)],2)):y("v-if",!0),O("input",Se({id:t(z),ref_key:"input",ref:j,class:t(n).e("inner")},t(c),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?U.value?"text":"password":e.type,disabled:t(u),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:t(ye),onCompositionupdate:t(ge),onCompositionend:t(be),onInput:oe,onChange:ve,onKeydown:we}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),y(" suffix slot "),t($e)?(h(),I("span",{key:1,class:x(t(n).e("suffix"))},[O("span",{class:x(t(n).e("suffix-inner"))},[!t(Y)||!t(ee)||!t(T)?(h(),I(ne,{key:0},[G(e.$slots,"suffix"),e.suffixIcon?(h(),E(t(D),{key:0,class:x(t(n).e("icon"))},{default:$(()=>[(h(),E(A(e.suffixIcon)))]),_:1},8,["class"])):y("v-if",!0)],64)):y("v-if",!0),t(Y)?(h(),E(t(D),{key:1,class:x([t(n).e("icon"),t(n).e("clear")]),onMousedown:_e(t(et),["prevent"]),onClick:xe},{default:$(()=>[(h(),E(A(e.clearIcon)))]),_:1},8,["class","onMousedown"])):y("v-if",!0),t(ee)?(h(),E(t(D),{key:2,class:x([t(n).e("icon"),t(n).e("password")]),onClick:Ke},{default:$(()=>[(h(),E(A(t(Le))))]),_:1},8,["class"])):y("v-if",!0),t(T)?(h(),I("span",{key:3,class:x([t(n).e("count"),t(n).is("outside",e.wordLimitPosition==="outside")])},[O("span",{class:x(t(n).e("count-inner"))},J(t(te))+" / "+J(e.maxlength),3)],2)):y("v-if",!0),t(L)&&t(de)&&t(ue)?(h(),E(t(D),{key:4,class:x([t(n).e("icon"),t(n).e("validateIcon"),t(n).is("loading",t(L)==="validating")])},{default:$(()=>[(h(),E(A(t(de))))]),_:1},8,["class"])):y("v-if",!0)],2)],2)):y("v-if",!0)],2),y(" append slot "),e.$slots.append?(h(),I("div",{key:1,class:x(t(n).be("group","append"))},[G(e.$slots,"append")],2)):y("v-if",!0)],64)):(h(),I(ne,{key:1},[y(" textarea "),O("textarea",Se({id:t(z),ref_key:"textarea",ref:N,class:[t(P).e("inner"),t(n).is("focus",t(_))]},t(c),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:t(u),readonly:e.readonly,autocomplete:e.autocomplete,style:t(ce),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t(ye),onCompositionupdate:t(ge),onCompositionend:t(be),onInput:oe,onFocus:t(Oe),onBlur:t(Be),onChange:ve,onKeydown:we}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),t(T)?(h(),I("span",{key:0,style:Ie(re.value),class:x([t(n).e("count"),t(n).is("outside",e.wordLimitPosition==="outside")])},J(t(te))+" / "+J(e.maxlength),7)):y("v-if",!0)],64))],38))}});var Mt=it(Vt,[["__file","input.vue"]]);const Ut=dt(Mt);export{Ut as E,Nt as a,Pt as u};
